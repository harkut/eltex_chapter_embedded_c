// ex_4.c
// Описание:
//    Напишите программу, которая ищет введенной строке (с клавиатуры)
//    введенную подстроку (с клавиатуры) и возвращает указатель на начало
//    подстроки, если подстрока не найдена в указатель записывается NULL.
//    В качестве строк использовать статические массивы.

// Заголовочные файлы.
#include <stdio.h>   /* Стандартный ввод вывод.*/

// Директивы препроцессора.
#define STR_LEN 50

int main() {
  
  char str[STR_LEN] = {0};
  char sub_str[STR_LEN] = {0};
  char *res = NULL;

  printf("Введите основную строку: ");
  fgets(str, sizeof(str), stdin);
    
  printf("Введите подстроку для поиска: ");
  fgets(sub_str, sizeof(sub_str), stdin);

  // Удаляем символ новой строки, который добавляет fgets.
  for(int i = 0; str[i] != '\0'; i++) {
    if(str[i] == '\n') {
      str[i] = '\0';
      break;
    }
  }
  for(int i = 0; sub_str[i] != '\0'; i++) {
    if(sub_str[i] == '\n') {
      sub_str[i] = '\0';
      break;
    }
  }

  // Перебираем первое начало подстроки в главной строке.
  for (int i = 0, j = 0; str[i] != '\0'; i++) {
    // Если совпадает первый символ str и sub_str.
    if (str[i] == sub_str[0]) {
      // Проверяем остальные символы подстроки. 
      for (j = 1; sub_str[j] != '\0'; j++) {
        // Если символы не совпадают смотрим следующий символ str.
        if (str[i + j] != sub_str[j]) {
          break;
        }
      }
      // Если подстрока найдена полностью, возвращаем указатель на начало
      // символа с которого началось совпадение.
      if (sub_str[j] == '\0') {
        res = &str[i];
        break;
      }
    }
  }

  if (res != NULL) {
    printf("Подстрока найдена по адресу: %p\n", (void*)res);
    printf("Найденная подстрока (начало): %s\n", res);
  } else {
    printf("Подстрока найдена по адресу: %p\n", (void*)res);
    printf("Подстрока не найдена (NULL).\n");
  }

  return 0;
}

